<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Will You Be My Valentine?</title>

  <style>
    body {
      height: 100vh;
      margin: 0;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      font-family: "Arial", sans-serif;
      background: linear-gradient(135deg, #ffdde1, #ee9ca7);
      overflow: hidden;
    }

    h1 {
      font-size: 36px;
      margin-bottom: 28px;
      color: #3a0f23;
      text-align: center;
      position: relative;
      z-index: 2;
    }

    /* Big final headline (hidden until final YES) */
    #yayText {
      display: none;
      font-size: clamp(56px, 8vw, 96px);
      font-weight: 800;
      letter-spacing: 2px;
      color: #3a0f23;
      text-align: center;
      margin: 0 0 10px 0;
      position: relative;
      z-index: 4; /* text above the kiss overlay */
      text-shadow: 0 10px 22px rgba(0,0,0,0.12);
    }

    /* Kisses gif overlay for YAY (behind text) */
    #yayKissGif {
      display: none;
      position: absolute;
      left: 50%;
      top: 50%;
      transform: translate(-50%, -62%);
      width: min(520px, 82vw);
      max-height: 42vh;
      object-fit: contain;
      opacity: 0.9;
      z-index: 3;           /* behind #yayText, above background */
      pointer-events: none; /* never blocks clicks */
      filter: drop-shadow(0 14px 28px rgba(0,0,0,0.18));
    }

    .buttons {
      position: relative;
      width: 100%;
      height: 420px;
      text-align: center;
      z-index: 2;
    }

    /* YES button */
    #yesBtn {
      font-size: 20px;
      padding: 15px 40px;
      border: none;
      border-radius: 8px;
      background-color: #ff3b6f;
      color: white;
      cursor: pointer;
      box-shadow: 0 6px 15px rgba(0,0,0,0.2);
      transition: transform 0.2s ease;
    }

    #yesBtn:hover {
      transform: scale(1.1);
    }

    /* NO button */
    #noBtn {
      position: fixed;
      left: 56%;
      top: 55%;
      font-size: 13px;
      padding: 8px 16px;
      border: none;
      border-radius: 18px;
      background-color: #6b6b6b;
      color: white;
      letter-spacing: 0.3px;
      pointer-events: none;
      user-select: none;
      box-shadow: 0 4px 10px rgba(0,0,0,0.15);
      will-change: left, top;
      z-index: 3;
    }

    /* Stage prompt */
    #stagePrompt {
      margin-top: 16px;
      font-size: 16px;
      color: #4a1d2f;
      opacity: 0.95;
      min-height: 22px;
      position: relative;
      z-index: 2;
    }

    /* Post-YES GIFs container (spread around page) */
    #finalGifs {
      position: fixed;
      inset: 0;
      display: none;
      pointer-events: none;
      z-index: 2; /* behind buttons/text, above background */
    }

    .finalGif {
      position: absolute;
      width: min(220px, 28vw);
      opacity: 0.95;
      border-radius: 14px;
      box-shadow: 0 12px 30px rgba(0,0,0,0.24);
      transform: rotate(0deg);
    }

    /* Default-mode question mark GIFs */
    #qGifs {
      position: fixed;
      inset: 0;
      pointer-events: none;
      z-index: 0;
    }

    .qGif {
      position: absolute;
      width: min(200px, 26vw);
      opacity: 0.95;
      border-radius: 14px;
      box-shadow: 0 12px 28px rgba(0,0,0,0.22);
      transform: rotate(0deg);
    }

    /* T&C */
    .tnc {
      position: absolute;
      bottom: 15px;
      font-size: 12px;
      color: #4a1d2f;
      opacity: 0.8;
      z-index: 2;
    }

    /* Confetti pieces */
    .confetti {
      position: absolute;
      top: -10px;
      width: 10px;
      height: 14px;
      opacity: 0.9;
      animation: fall linear forwards;
      pointer-events: none;
      z-index: 6;
    }

    @keyframes fall {
      to {
        transform: translateY(110vh) rotate(720deg);
        opacity: 1;
      }
    }
  </style>
</head>

<body>

  <!-- Default-mode question mark GIFs (removed after final YES) -->
  <div id="qGifs" aria-hidden="true">
    <img class="qGif" alt="?" />
    <img class="qGif" alt="?" />
    <img class="qGif" alt="?" />
    <img class="qGif" alt="?" />
    <img class="qGif" alt="?" />
  </div>

  <h1 id="mainTitle">Will you be my Valentine, Nidhi? ‚ù§Ô∏è</h1>

  <!-- Kisses gif overlay for YAY (behind text) -->
  <img id="yayKissGif" alt="Kisses" />

  <!-- Big success text -->
  <div id="yayText">YAYYYYYYY</div>

  <!-- Post-YES GIFs (spread around page like the question gifs) -->
  <div id="finalGifs" aria-hidden="true">
    <img class="finalGif" alt="Final GIF 1" />
    <img class="finalGif" alt="Final GIF 2" />
    <img class="finalGif" alt="Final GIF 3" />
    <img class="finalGif" alt="Final GIF 4" />
    <img class="finalGif" alt="Final GIF 5" />
    <img class="finalGif" alt="Final GIF 6" />
  </div>

  <div class="buttons">
    <button id="yesBtn">YES</button>
    <div id="stagePrompt"></div>
  </div>

  <button id="noBtn">no</button>

  <div class="tnc">* no is a bit shy</div>

  <script>
    // ‚úÖ Post-YES GIFs (now spread around page)
    const finalGifUrls = [
      "https://media0.giphy.com/media/v1.Y2lkPTc5MGI3NjExdWZ5ZnhmZnV2eDNoc2Z2YXFrcWl4NTA5azM3eWg1ZnFoa3NxcTh1MCZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/WmkqburJqXziM/giphy.gif",
      "https://media.giphy.com/media/v1.Y2lkPTc5MGI3NjExZWIxMTQ2MzV0M2xncnd6cmw5ZnFvNHBibDhheXp6Z3J0dWk4MGhubSZlcD12MV9naWZzX3NlYXJjaCZjdD1n/nDMyoNRkCesJdZAuuL/giphy.gif",
      "https://media.giphy.com/media/v1.Y2lkPTc5MGI3NjExbnl0Y3BqeWp2ZzA4eXk1MWJsZWR3YzVmdGRwNzkzYWxmc2QybGJ0eiZlcD12MV9naWZzX3NlYXJjaCZjdD1n/RLJxQtX8Hs7XytaoyX/giphy.gif",
      "https://media.giphy.com/media/v1.Y2lkPTc5MGI3NjExbDFnMnd3a2V4OTNod245c29mNTJodTF5dm54bXIwd2lscmJzZnd1eiZlcD12MV9naWZzX3NlYXJjaCZjdD1n/L3kTwtVpbo8GURq71M/giphy.gif",
      "https://media.giphy.com/media/v1.Y2lkPTc5MGI3NjExbDFnMnd3a2V4OTNod245c29mNTJodTF5dm54bXIwd2lscmJzZnd1eiZlcD12MV9naWZzX3NlYXJjaCZjdD1n/Jt4y4zi519V6asgGhA/giphy.gif"
    ];

    // ‚úÖ Kisses gif overlay for the YAY
    const kissesGifUrl =
      "https://media4.giphy.com/media/v1.Y2lkPTc5MGI3NjExZ2J6dnoxOHBydmVyM3YwM2RrM2s3Y2QybnVhOTlubjYxa3FzbmcwcCZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/MDJ9IbxxvDUQM/giphy.gif";

    // ‚úÖ Default-mode "question mark" gifs (removed after final YES)
    const questionGifUrls = [
      "https://media3.giphy.com/media/v1.Y2lkPTc5MGI3NjExemRpYjV6ZWdtNzV5MDV1eWlhbW51dnVyaG4ydThsaTBsbmZ3ZGk0cSZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/OnVGNHwl1FtIDTI7fJ/giphy.gif",
      "https://media.giphy.com/media/26ufdipQqU2lhNA4g/giphy.gif",
      "https://media.giphy.com/media/5VKbvrjxpVJCM/giphy.gif",
      "https://media.giphy.com/media/l0HlBO7eyXzSZkJri/giphy.gif",
      "https://media.giphy.com/media/2t9sDPrlvFpdK/giphy.gif"
    ];

    // Multi-stage YES flow
    const stages = [
      { prompt: "Are you sure? üòè", yesText: "Yes" },
      { prompt: "Like‚Ä¶ REALLY sure? ü•∫", yesText: "Yes, really" },
      { prompt: "Last chance to back out üòå", yesText: "Okay YES" },
      { prompt: "Locking it in‚Ä¶ üíò", yesText: "YESSS!" }
    ];
    let stageIndex = 0;

    const mainTitle = document.getElementById("mainTitle");
    const yayText = document.getElementById("yayText");
    const yayKissGif = document.getElementById("yayKissGif");

    const yesBtn = document.getElementById("yesBtn");
    const stagePrompt = document.getElementById("stagePrompt");

    // Question GIF elements
    const qGifsWrap = document.getElementById("qGifs");
    const qGifImgs = Array.from(document.querySelectorAll("#qGifs .qGif"));

    // Final GIF elements
    const finalGifsWrap = document.getElementById("finalGifs");
    const finalGifImgs = Array.from(document.querySelectorAll("#finalGifs .finalGif"));

    function placeQuestionGifs() {
      const positions = [
        { left: 6,  top: 12, rot: -10 },
        { left: 78, top: 10, rot: 8 },
        { left: 8,  top: 70, rot: 6 },
        { left: 78, top: 72, rot: -8 },
        { left: 42, top: 78, rot: 3 }
      ];

      qGifImgs.forEach((img, i) => {
        img.src = questionGifUrls[i % questionGifUrls.length];
        img.style.left = positions[i].left + "vw";
        img.style.top = positions[i].top + "vh";
        img.style.transform = `rotate(${positions[i].rot}deg)`;
      });
    }

    function placeFinalGifs() {
      // Spread around the page, keep a clear-ish middle for YAY + buttons
      const positions = [
        { left: 6,  top: 16, rot: -7 },
        { left: 76, top: 18, rot: 6 },
        { left: 10, top: 62, rot: 8 },
        { left: 76, top: 64, rot: -6 },
        { left: 28, top: 10, rot: 4 },
        { left: 56, top: 72, rot: -4 }
      ];

      finalGifImgs.forEach((img, i) => {
        img.src = finalGifUrls[i % finalGifUrls.length];
        img.style.left = positions[i].left + "vw";
        img.style.top = positions[i].top + "vh";
        img.style.transform = `rotate(${positions[i].rot}deg)`;
      });
    }

    placeQuestionGifs();

    window.addEventListener("resize", () => {
      placeQuestionGifs();
      if (finalGifsWrap.style.display === "block") placeFinalGifs();
    });

    function removeQuestionGifs() {
      if (qGifsWrap) qGifsWrap.remove();
    }

    function showFinalGifs() {
      placeFinalGifs();
      finalGifsWrap.style.display = "block";
    }

    // ---- Confetti: keep going for ~25 seconds ----
    let confettiTimer = null;
    let confettiStopper = null;

    function burstConfetti(count = 120) {
      const colors = ["#ff3b6f", "#ffffff", "#ffd1dc", "#b3003c", "#ffcc00", "#6a00ff", "#00c2ff"];
      const durationMin = 1600;
      const durationMax = 3400;

      for (let i = 0; i < count; i++) {
        const piece = document.createElement("div");
        piece.className = "confetti";

        const sizeW = 6 + Math.random() * 10;
        const sizeH = 8 + Math.random() * 14;
        piece.style.width = sizeW + "px";
        piece.style.height = sizeH + "px";

        piece.style.left = (Math.random() * 100) + "vw";
        piece.style.background = colors[Math.floor(Math.random() * colors.length)];

        const dur = durationMin + Math.random() * (durationMax - durationMin);
        piece.style.animationDuration = dur + "ms";

        const drift = (Math.random() * 2 - 1) * 160;
        piece.style.transform = `translateX(${drift}px) rotate(${Math.random() * 360}deg)`;

        document.body.appendChild(piece);
        setTimeout(() => piece.remove(), dur + 200);
      }
    }

    function startConfettiFor(ms) {
      if (confettiTimer) clearInterval(confettiTimer);
      if (confettiStopper) clearTimeout(confettiStopper);

      burstConfetti(240);
      confettiTimer = setInterval(() => burstConfetti(120), 650);

      confettiStopper = setTimeout(() => {
        clearInterval(confettiTimer);
        confettiTimer = null;
      }, ms);
    }

    yesBtn.addEventListener("click", () => {
      // Advance stages
      if (stageIndex < stages.length) {
        stagePrompt.textContent = stages[stageIndex].prompt;
        yesBtn.textContent = stages[stageIndex].yesText;

        const grow = 1 + stageIndex * 0.08;
        yesBtn.style.transform = `scale(${grow})`;

        stageIndex++;
        return;
      }

      // Final YES outcome
      mainTitle.style.display = "none";
      yayText.style.display = "block";

      // Show kisses overlay behind text
      yayKissGif.src = kissesGifUrl;
      yayKissGif.style.display = "block";

      stagePrompt.textContent = "";
      removeQuestionGifs();

      // Show the final gifs spread around the page
      showFinalGifs();

      startConfettiFor(25000); // ~25 seconds

      yesBtn.disabled = true;
      yesBtn.style.cursor = "default";
      yesBtn.style.opacity = "0.9";
    });

    // --- NO button: runs away from cursor but NEVER leaves the screen ---
    const noBtn = document.getElementById("noBtn");

    let noX = window.innerWidth * 0.56;
    let noY = window.innerHeight * 0.55;
    noBtn.style.left = noX + "px";
    noBtn.style.top = noY + "px";

    function clamp(val, min, max) {
      return Math.max(min, Math.min(max, val));
    }

    document.addEventListener("mousemove", (e) => {
      const rect = noBtn.getBoundingClientRect();

      const cx = rect.left + rect.width / 2;
      const cy = rect.top + rect.height / 2;

      const dx = cx - e.clientX;
      const dy = cy - e.clientY;
      const dist = Math.hypot(dx, dy);

      const trigger = 150;
      if (dist < trigger) {
        const nx = dx / (dist || 1);
        const ny = dy / (dist || 1);

        const speed = 10 + (trigger - dist) * 0.25;

        noX = rect.left + nx * speed;
        noY = rect.top + ny * speed;

        const pad = 10;
        const maxX = window.innerWidth - rect.width - pad;
        const maxY = window.innerHeight - rect.height - pad;

        noX = clamp(noX, pad, maxX);
        noY = clamp(noY, pad, maxY);

        noBtn.style.left = noX + "px";
        noBtn.style.top = noY + "px";
      }
    });

    window.addEventListener("resize", () => {
      const rect = noBtn.getBoundingClientRect();
      const pad = 10;
      const maxX = window.innerWidth - rect.width - pad;
      const maxY = window.innerHeight - rect.height - pad;

      const currentLeft = parseFloat(noBtn.style.left) || rect.left;
      const currentTop = parseFloat(noBtn.style.top) || rect.top;

      noX = clamp(currentLeft, pad, maxX);
      noY = clamp(currentTop, pad, maxY);

      noBtn.style.left = noX + "px";
      noBtn.style.top = noY + "px";
    });
  </script>

</body>
</html>
